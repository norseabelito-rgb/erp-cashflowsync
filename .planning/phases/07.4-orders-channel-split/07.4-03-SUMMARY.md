---
phase: 07.4-orders-channel-split
plan: 03
subsystem: ui
tags: [react, dialog, form, product-search, orders, shopify]

# Dependency graph
requires:
  - phase: 07.4-01
    provides: ChannelTabs component with URL persistence
provides:
  - ManualOrderDialog component with product search
  - Manual order creation UI for Shopify tab
  - Form validation for customer details
affects: [07.4-04-shopify-push-api, orders-page]

# Tech tracking
tech-stack:
  added: []
  patterns: [debounced-search, dialog-form-validation, channel-specific-actions]

key-files:
  created:
    - src/components/orders/manual-order-dialog.tsx
  modified:
    - src/app/(dashboard)/orders/page.tsx

key-decisions:
  - "300ms debounce on product search for performance"
  - "Romanian phone validation: 10 digits starting with 0"
  - "Price from MasterProduct is readonly (no override in form)"
  - "Button visible only on Shopify tab (channelTab === 'shopify')"
  - "shopifyStores passed to dialog (not all stores)"

patterns-established:
  - "Channel-specific actions: Show/hide based on channelTab value"
  - "Dialog state: useState for open + mutation for submit"

# Metrics
duration: 4min
completed: 2026-02-03
---

# Phase 7.4 Plan 03: Manual Order Creation Dialog Summary

**ManualOrderDialog component with product search, customer form validation, and Shopify tab integration for offline/phone order entry**

## Performance

- **Duration:** 4 min
- **Started:** 2026-02-03T12:15:52Z
- **Completed:** 2026-02-03T12:19:29Z
- **Tasks:** 2
- **Files modified:** 2

## Accomplishments
- ManualOrderDialog component with comprehensive order creation form
- Product search with 300ms debounce querying /api/products endpoint
- Customer form with all required shipping fields and validation
- "Creare comanda" button visible only on Shopify tab
- Mutation ready to call /api/orders/manual (API in Plan 04)

## Task Commits

Each task was committed atomically:

1. **Task 1: Create ManualOrderDialog component** - `7011e68` (feat)
2. **Task 2: Integrate dialog into orders page with Shopify tab button** - `26e34cb` (feat)

## Files Created/Modified
- `src/components/orders/manual-order-dialog.tsx` - ManualOrderDialog component with product search, customer form, validation
- `src/app/(dashboard)/orders/page.tsx` - Added dialog import, state, mutation, button on Shopify tab, dialog render

## Decisions Made
- **300ms debounce on product search:** Balances responsiveness with API load reduction
- **Romanian phone validation:** 10 digits starting with 0 (standard Romanian mobile format)
- **Price readonly:** MasterProduct.price displays but can't be overridden (keeps pricing consistent)
- **Button on Shopify tab only:** Manual orders target Shopify stores (Trendyol has different flow)
- **shopifyStores prop:** Only Shopify stores passed to dialog, not Trendyol stores

## Deviations from Plan

None - plan executed exactly as written.

## Issues Encountered
- TypeScript check showed pre-existing Prisma type errors unrelated to this plan
- Build verification blocked by Prisma permission issue (known env issue)
- Both issues are environment-specific, not code problems

## User Setup Required

None - no external service configuration required.

## Next Phase Readiness
- ManualOrderDialog UI complete and integrated
- API endpoint /api/orders/manual needed (Plan 04 creates this)
- Dialog will work end-to-end once API is implemented

---
*Phase: 07.4-orders-channel-split*
*Completed: 2026-02-03*
