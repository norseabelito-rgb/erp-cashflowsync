---
phase: 06-ux-foundation
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - src/app/providers.tsx
  - src/components/ui/action-tooltip.tsx
  - src/components/ui/skeleton.tsx
autonomous: true

must_haves:
  truths:
    - "All tooltips appear with 300ms delay consistently across the app"
    - "ActionTooltip displays action + consequence for enabled buttons"
    - "ActionTooltip displays disabled reason for disabled buttons"
    - "Skeleton components render with pulse animation"
  artifacts:
    - path: "src/components/ui/action-tooltip.tsx"
      provides: "ActionTooltip component with action/consequence/disabledReason props"
      exports: ["ActionTooltip", "ActionTooltipProps"]
    - path: "src/components/ui/skeleton.tsx"
      provides: "Base Skeleton and preset compositions"
      exports: ["Skeleton", "SkeletonText", "SkeletonCard", "SkeletonAvatar", "SkeletonTableRow"]
    - path: "src/app/providers.tsx"
      provides: "TooltipProvider with 300ms delay"
      contains: "delayDuration={300}"
  key_links:
    - from: "src/app/providers.tsx"
      to: "@/components/ui/tooltip"
      via: "TooltipProvider import"
      pattern: "TooltipProvider.*delayDuration"
---

<objective>
Create the foundational UX components for Phase 6: TooltipProvider with global 300ms delay, ActionTooltip component for descriptive button tooltips, and Skeleton component system for loading states.

Purpose: Establish the base components that all subsequent UX improvements will use. These primitives ensure consistent tooltip behavior and loading state presentation across the entire application.

Output: Three component files ready for use across all dashboard pages.
</objective>

<execution_context>
@/Users/stefanpanaite/.claude/get-shit-done/workflows/execute-plan.md
@/Users/stefanpanaite/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/06-ux-foundation/06-CONTEXT.md
@.planning/phases/06-ux-foundation/06-RESEARCH.md

# Existing components to reference:
@src/components/ui/tooltip.tsx
@src/app/providers.tsx
@src/lib/design-system.ts
</context>

<tasks>

<task type="auto">
  <name>Task 1: Add TooltipProvider with 300ms delay to providers.tsx</name>
  <files>src/app/providers.tsx</files>
  <action>
Import TooltipProvider from @/components/ui/tooltip and wrap the entire app with it.

Configuration:
- delayDuration={300} - 300ms before tooltip appears
- skipDelayDuration={100} - skip delay when moving between tooltips quickly

Place TooltipProvider as the innermost wrapper (directly around {children}) so it's available to all components.

Structure should be:
```
SessionProvider
  QueryClientProvider
    ThemeProvider
      GlobalLoadingProvider
        TooltipProvider
          {children}
```
  </action>
  <verify>
Verify TooltipProvider is imported and wrapping children:
- grep for "TooltipProvider" in providers.tsx
- grep for "delayDuration={300}" in providers.tsx
  </verify>
  <done>TooltipProvider wraps app with 300ms delay configured</done>
</task>

<task type="auto">
  <name>Task 2: Create ActionTooltip component</name>
  <files>src/components/ui/action-tooltip.tsx</files>
  <action>
Create a new component that extends the base tooltip with action-consequence semantics.

Interface:
```typescript
export interface ActionTooltipProps {
  /** Main action description (e.g., "Genereaza factura") */
  action: string;
  /** Consequence of the action (e.g., "Se trimite catre Oblio") */
  consequence?: string;
  /** Whether the trigger is disabled */
  disabled?: boolean;
  /** Reason for disabled state - shown instead of action/consequence when disabled */
  disabledReason?: string;
  /** Tooltip position */
  side?: "top" | "right" | "bottom" | "left";
  /** The trigger element */
  children: React.ReactNode;
}
```

Behavior:
1. If disabled AND disabledReason provided: Show disabledReason
2. If consequence provided: Show "{action} - {consequence}"
3. Otherwise: Show just action

Styling:
- max-w-xs for wrapping long text
- text-xs font size
- When disabled, use bg-muted text-muted-foreground for visual distinction

Use existing Tooltip, TooltipTrigger, TooltipContent from @/components/ui/tooltip.
  </action>
  <verify>
- File exists: src/components/ui/action-tooltip.tsx
- Component exports ActionTooltip and ActionTooltipProps
- Imports from @/components/ui/tooltip
  </verify>
  <done>ActionTooltip component created with action/consequence/disabledReason support</done>
</task>

<task type="auto">
  <name>Task 3: Create Skeleton component system</name>
  <files>src/components/ui/skeleton.tsx</files>
  <action>
Create a skeleton component with base and preset compositions.

Base component:
```typescript
interface SkeletonProps extends React.HTMLAttributes<HTMLDivElement> {}

export function Skeleton({ className, ...props }: SkeletonProps) {
  return (
    <div
      className={cn("animate-pulse rounded-md bg-muted", className)}
      {...props}
    />
  );
}
```

Preset compositions (all exported):

1. SkeletonText - For text content:
```typescript
export function SkeletonText({ lines = 1 }: { lines?: number }) {
  // Renders multiple skeleton lines
  // Last line is 3/4 width for natural look
}
```

2. SkeletonCard - For card placeholders:
```typescript
export function SkeletonCard() {
  // Rounded border, padding, contains:
  // - Title skeleton (h-5 w-1/3)
  // - Two text lines (h-4 full width, h-4 w-2/3)
}
```

3. SkeletonAvatar - For avatar/profile images:
```typescript
export function SkeletonAvatar({ size = "default" }: { size?: "sm" | "default" | "lg" }) {
  // Circular skeleton
  // sm: h-8 w-8, default: h-10 w-10, lg: h-12 w-12
}
```

4. SkeletonTableRow - For table row placeholders:
```typescript
export function SkeletonTableRow({ cols = 4 }: { cols?: number }) {
  // Flex row matching data-table.tsx pattern
  // Uses animate-pulse on each cell
}
```

Use cn() from @/lib/utils for class merging.
  </action>
  <verify>
- File exists: src/components/ui/skeleton.tsx
- Exports: Skeleton, SkeletonText, SkeletonCard, SkeletonAvatar, SkeletonTableRow
- Uses animate-pulse from Tailwind
  </verify>
  <done>Skeleton component system created with base and 4 preset compositions</done>
</task>

</tasks>

<verification>
After all tasks complete:

1. TooltipProvider check:
```bash
grep -n "TooltipProvider" src/app/providers.tsx
grep -n "delayDuration" src/app/providers.tsx
```

2. ActionTooltip check:
```bash
head -50 src/components/ui/action-tooltip.tsx
```

3. Skeleton check:
```bash
grep -n "export function" src/components/ui/skeleton.tsx
```

4. Build check:
```bash
npm run build 2>&1 | head -30
```
</verification>

<success_criteria>
- TooltipProvider wraps app with delayDuration={300}
- ActionTooltip component exists with action/consequence/disabledReason props
- Skeleton component exists with 5 exports (base + 4 presets)
- Build passes without errors
</success_criteria>

<output>
After completion, create `.planning/phases/06-ux-foundation/06-01-SUMMARY.md`
</output>
