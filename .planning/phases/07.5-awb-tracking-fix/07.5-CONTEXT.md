# Phase 7.5: AWB Tracking Fix - Context

**Gathered:** 2026-02-03
**Status:** Ready for planning

<domain>
## Phase Boundary

Fix AWB tracking page to show accurate status counts with correct categorization. All FanCourier statuses displayed as individual cards with Romanian explanations. Sum of cards must equal total. Dashboard "Expediate" must match tracking "In Tranzit" via shared logic.

</domain>

<decisions>
## Implementation Decisions

### Status Categories
- Display ALL FanCourier statuses as individual cards (flat list, no grouping)
- Fetch official status list from FanCourier API (API-driven approach)
- Each status has Romanian explanation shown in detailed modal on click
- Modal includes: status explanation + what user should do

### Unknown Status Handling
- Unknown statuses displayed as "Necunoscut" card with count
- Raw FanCourier status string shown only in details modal (not on card)
- Unknown statuses logged to database table (track first seen date and count)
- Settings page for admin to view unknown statuses and manually add mappings

### Card Display
- Cards ordered by count (high to low) - most common statuses first
- Semantic color scheme:
  - Green = delivered
  - Blue = transit
  - Red = return
  - Yellow = problem
  - Gray = unknown
- Clicking card filters the AWB table below to that status
- Show all cards including those with zero count (consistent layout)

### Dashboard Sync
- Single source of truth: shared module (awb-status.ts) used by both pages
- Dashboard keeps "Expediate" as summary card with tooltip showing breakdown
- Clicking "Expediate" navigates to tracking page pre-filtered to In Tranzit statuses

### Claude's Discretion
- Whether to extend existing awb-status.ts or replace with comprehensive implementation
- Exact modal UI design for status explanations
- Database table structure for unknown status logging
- Settings page layout for status mapping admin

</decisions>

<specifics>
## Specific Ideas

- "Vreau absolut toate statusurile pe care le trimite FanCourier, cu explicatii pe romaneste cu ce inseamna fiecare"
- FanCourier API should be the source for complete status list
- Admin should be able to map new statuses when they appear

</specifics>

<deferred>
## Deferred Ideas

None â€” discussion stayed within phase scope

</deferred>

---

*Phase: 07.5-awb-tracking-fix*
*Context gathered: 2026-02-03*
