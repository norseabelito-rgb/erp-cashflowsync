---
phase: 01-system-audit
plan: 01
type: execute
wave: 1
depends_on: []
files_modified:
  - .planning/phases/01-system-audit/audit-output/pages/orders.md
  - .planning/phases/01-system-audit/audit-output/pages/invoices.md
  - .planning/phases/01-system-audit/audit-output/pages/dashboard.md
  - .planning/phases/01-system-audit/audit-output/pages/inventory.md
  - .planning/phases/01-system-audit/audit-output/pages/products.md
  - .planning/phases/01-system-audit/audit-output/pages/settings.md
  - .planning/phases/01-system-audit/audit-output/pages/awb.md
  - .planning/phases/01-system-audit/audit-output/pages/remaining-pages.md
autonomous: false

must_haves:
  truths:
    - "Every dashboard page has been visited and documented with current functionality"
    - "Each page audit documents all UI elements (buttons, fields, filters) with their status"
    - "Dead code and unused features are flagged for each page"
    - "Discrepancies between expected and actual behavior are classified by severity"
  artifacts:
    - path: ".planning/phases/01-system-audit/audit-output/pages/orders.md"
      provides: "Complete Orders page audit (highest priority)"
      contains: "## Scopul Paginii"
    - path: ".planning/phases/01-system-audit/audit-output/pages/invoices.md"
      provides: "Invoices page audit"
      contains: "## Elemente UI"
    - path: ".planning/phases/01-system-audit/audit-output/pages/settings.md"
      provides: "Settings page audit (integration configs)"
      contains: "## Discrepante"
  key_links:
    - from: "audit-output/pages/*.md"
      to: "src/app/(dashboard)/*/page.tsx"
      via: "source file reference"
      pattern: "Fisier:.*page\\.tsx"
---

<objective>
Audit all dashboard pages in the ERP system, documenting UI elements, behaviors, and issues.

Purpose: Establish a complete baseline of current UI functionality before any fixes. The Orders page is the highest priority as it's where daily work happens. This audit will reveal what works, what's broken, and what's unused.

Output: Per-page audit documents in Romanian covering elements, behaviors, and discrepancies.
</objective>

<execution_context>
@~/.claude/get-shit-done/workflows/execute-plan.md
@~/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/01-system-audit/01-CONTEXT.md
@.planning/phases/01-system-audit/01-RESEARCH.md
@.planning/codebase/STRUCTURE.md
@.planning/codebase/CONCERNS.md
</context>

<tasks>

<task type="auto">
  <name>Task 1: Audit Orders page (highest priority)</name>
  <files>
    .planning/phases/01-system-audit/audit-output/pages/orders.md
    src/app/(dashboard)/orders/page.tsx
  </files>
  <action>
Read src/app/(dashboard)/orders/page.tsx (2301 lines - monolithic component flagged in CONCERNS.md).

Document following the template from 01-RESEARCH.md:
1. **Scopul Paginii** - What the page does, who uses it
2. **Elemente UI** - Every button, action, filter with their status:
   - Header actions (Sync Orders, Export, New Order button status)
   - Table columns (sortable, filterable, data source)
   - Row actions (View, Edit, Process, etc.)
   - Dialogs/Modals (order detail, processing confirmation)
3. **Comportament Observat** - What happens on load, on each action
4. **Discrepante** - Any differences from expected behavior, classified as:
   - Blochează munca (critical - cannot complete daily ops)
   - Deranjează (annoying - works but causes friction)
   - Cosmetic (nice-to-have)
5. **Cod Mort / Nefolosit** - Flag any unused features visible in UI
6. **Note pentru Planificare** - Observations for later phases

Cross-reference with known bugs from CONCERNS.md:
- "Missing Product Line Items in Order Details" - verify if still present
- Check for N+1 query patterns mentioned

Write in Romanian. All business terms stay natural: factură, AWB, decontare.
  </action>
  <verify>
File exists at .planning/phases/01-system-audit/audit-output/pages/orders.md with:
- Scopul Paginii section
- At least 10 UI elements documented in tables
- Discrepante section with severity classification
- References to source file line numbers
  </verify>
  <done>
Orders page fully audited with all UI elements, behaviors, and issues documented in Romanian. Known bugs from CONCERNS.md verified/updated.
  </done>
</task>

<task type="auto">
  <name>Task 2: Audit core business pages (Invoices, Inventory, Products, AWB)</name>
  <files>
    .planning/phases/01-system-audit/audit-output/pages/invoices.md
    .planning/phases/01-system-audit/audit-output/pages/inventory.md
    .planning/phases/01-system-audit/audit-output/pages/products.md
    .planning/phases/01-system-audit/audit-output/pages/awb.md
    src/app/(dashboard)/invoices/page.tsx
    src/app/(dashboard)/inventory/page.tsx
    src/app/(dashboard)/products/page.tsx
    src/app/(dashboard)/awb/page.tsx
  </files>
  <action>
For each page (invoices, inventory, products, awb), read the source file and create audit document following the same template:

**Invoices page:**
- Focus on series selection, generation status, cancellation flows
- Flag any Facturis integration issues visible in UI
- Document invoice list columns and filters

**Inventory page:**
- Document stock levels display, warehouse filtering
- Check for reservation indicators, low stock alerts
- Verify N+1 query pattern mentioned in CONCERNS.md

**Products page:**
- Document product list, master product creation
- Verify "SKU Duplicate in Product Creation Dropdown" bug from CONCERNS.md
- Check image sync functionality mentioned in known bugs

**AWB page:**
- Document shipping label list, status tracking
- Check FanCourier/SelfAWB integration status indicators
- Document batch printing functionality

Each audit document uses same structure:
- Scopul Paginii, Elemente UI, Comportament Observat, Discrepante, Cod Mort, Note pentru Planificare

Write all in Romanian. Cross-reference bugs from CONCERNS.md.
  </action>
  <verify>
Four files exist:
- .planning/phases/01-system-audit/audit-output/pages/invoices.md
- .planning/phases/01-system-audit/audit-output/pages/inventory.md
- .planning/phases/01-system-audit/audit-output/pages/products.md
- .planning/phases/01-system-audit/audit-output/pages/awb.md

Each contains Scopul Paginii and Elemente UI sections.
  </verify>
  <done>
Core business pages audited: Invoices, Inventory, Products, AWB. Each document covers UI elements, behaviors, discrepancies in Romanian.
  </done>
</task>

<task type="auto">
  <name>Task 3: Audit Settings and remaining dashboard pages</name>
  <files>
    .planning/phases/01-system-audit/audit-output/pages/settings.md
    .planning/phases/01-system-audit/audit-output/pages/dashboard.md
    .planning/phases/01-system-audit/audit-output/pages/remaining-pages.md
    src/app/(dashboard)/settings/page.tsx
    src/app/(dashboard)/dashboard/page.tsx
  </files>
  <action>
**Settings page (1624 lines - second largest):**
- Document all settings tabs/sections
- Focus on integration settings: Facturis, SelfAWB/FanCourier, Shopify
- Flag which settings are actively used vs. legacy (ask user if unclear)
- Document company/store mapping configuration
- Check for FreshSales/BaseLinker config sections - flag as potential dead code

**Dashboard page:**
- Document main dashboard widgets/stats
- Check what KPIs are displayed
- Verify data freshness indicators

**Remaining pages (create combined document):**
Cover briefly (less detail needed for less-used pages):
- activity/
- ads/ (note: ~80KB of code, usage unclear - flag for user confirmation)
- categories/
- docs/
- handover/
- intercompany/
- notifications/
- picking/
- preferences/
- processing-errors/
- profile/
- stores/
- sync-history/
- tracking/
- trendyol/ (full integration exists - flag for user confirmation on usage status)

For each: one paragraph on purpose, note if appears unused or unclear usage.

Flag potential dead code:
- FreshSales mentions
- BaseLinker mentions
- Unclear ads module usage
- Trendyol integration status
  </action>
  <verify>
Three files exist:
- .planning/phases/01-system-audit/audit-output/pages/settings.md (comprehensive, covers integrations)
- .planning/phases/01-system-audit/audit-output/pages/dashboard.md
- .planning/phases/01-system-audit/audit-output/pages/remaining-pages.md

Settings.md contains integration settings section.
Remaining-pages.md flags dead code candidates.
  </verify>
  <done>
Settings page audited with integration configs documented. Dashboard and all remaining pages covered. Dead code candidates (FreshSales, BaseLinker, Ads, Trendyol status) flagged for user confirmation.
  </done>
</task>

<task type="checkpoint:human-verify" gate="blocking">
  <what-built>
Complete dashboard pages audit covering all 20+ pages in src/app/(dashboard)/.
Priority pages (Orders, Invoices, Inventory, Products, AWB, Settings) have detailed documentation.
Secondary pages have brief coverage.
Dead code candidates flagged.
  </what-built>
  <how-to-verify>
1. Review .planning/phases/01-system-audit/audit-output/pages/orders.md
   - Confirm it matches your understanding of the Orders page
   - Flag any missing elements or incorrect descriptions

2. Review settings.md integration sections
   - Confirm which integrations are actively used
   - Confirm FreshSales/BaseLinker are dead code

3. Review remaining-pages.md dead code flags
   - Confirm Ads module usage status (active or unused?)
   - Confirm Trendyol integration status (active or testing?)

4. For any page audit, verify against production:
   - Visit https://erp.cashflowgrup.net/[page]
   - Compare documented elements to what you see
   - Report any discrepancies

Questions to answer:
- Settings: Which settings tabs do you actually use daily?
- Ads module: Is this in active use or dormant?
- Trendyol: Is this integration live with real orders?
  </how-to-verify>
  <resume-signal>
Reply with:
- "approved" if audits are accurate
- OR list corrections needed with format: "[page]: [correction]"
  </resume-signal>
</task>

</tasks>

<verification>
- [ ] All page.tsx files in src/app/(dashboard)/ have been read
- [ ] Orders page audit is comprehensive (highest priority page)
- [ ] Each audit document follows template structure from 01-RESEARCH.md
- [ ] All documents written in Romanian with natural business terms
- [ ] Known bugs from CONCERNS.md verified and referenced
- [ ] Dead code candidates flagged for user confirmation
- [ ] Discrepancies classified by severity (Blochează/Deranjează/Cosmetic)
</verification>

<success_criteria>
1. Every dashboard page documented with at least: purpose, UI elements, observed behavior
2. Orders page has detailed audit (30+ UI elements documented)
3. Settings page documents all integration configurations
4. Dead code flagged: FreshSales, BaseLinker, unclear features
5. User has verified audits match production reality
</success_criteria>

<output>
After completion, create `.planning/phases/01-system-audit/01-01-SUMMARY.md`
</output>
