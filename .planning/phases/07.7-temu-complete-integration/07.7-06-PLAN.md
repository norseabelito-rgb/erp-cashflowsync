---
phase: 07.7-temu-complete-integration
plan: 06
type: execute
wave: 3
depends_on: ["07.7-05"]
files_modified:
  - src/app/(dashboard)/temu/page.tsx
  - src/app/(dashboard)/temu/orders/page.tsx
  - src/components/sidebar.tsx
autonomous: true

must_haves:
  truths:
    - "Temu section appears in sidebar navigation"
    - "Dedicated /temu page exists for Temu dashboard"
    - "Dedicated /temu/orders page exists for Temu orders"
    - "Sidebar Temu section follows Trendyol pattern"
  artifacts:
    - path: "src/app/(dashboard)/temu/page.tsx"
      provides: "Temu dashboard page"
      min_lines: 50
    - path: "src/app/(dashboard)/temu/orders/page.tsx"
      provides: "Dedicated Temu orders page"
      min_lines: 30
    - path: "src/components/sidebar.tsx"
      provides: "Sidebar with Temu section"
      contains: "Temu"
  key_links:
    - from: "src/components/sidebar.tsx"
      to: "/temu"
      via: "navigation link"
      pattern: "href.*temu"
---

<objective>
Add Temu section to sidebar navigation and create dedicated Temu dashboard and orders pages, following the established Trendyol pattern exactly.

Purpose: Provide users with a dedicated area for Temu management, consistent with the Trendyol section in the sidebar. This enables quick access to Temu-specific features.

Output: Sidebar has Temu section with links to Temu dashboard and orders, both pages functional.
</objective>

<execution_context>
@/Users/stefanpanaite/.claude/get-shit-done/workflows/execute-plan.md
@/Users/stefanpanaite/.claude/get-shit-done/templates/summary.md
</execution_context>

<context>
@.planning/PROJECT.md
@.planning/ROADMAP.md
@.planning/STATE.md
@.planning/phases/07.7-temu-complete-integration/07.7-05-SUMMARY.md

# Pattern reference
@src/app/(dashboard)/trendyol/page.tsx
@src/app/(dashboard)/trendyol/orders/page.tsx
@src/components/sidebar.tsx
</context>

<tasks>

<task type="auto">
  <name>Task 1: Create Temu Dashboard Page</name>
  <files>src/app/(dashboard)/temu/page.tsx</files>
  <action>
Create Temu dashboard page following Trendyol page pattern.

1. Create the page with:
   - PageHeader: "Temu" with description
   - Stats cards showing:
     - Total Temu orders
     - Orders pending invoice
     - Orders pending AWB
     - Orders synced today
   - Quick actions section:
     - Sync orders button
     - View all orders link
     - Settings link (to Temu stores tab)

2. Fetch stats from database:
   ```typescript
   // Server component - fetch stats directly
   async function getTemuStats() {
     const now = new Date();
     const todayStart = new Date(now.getFullYear(), now.getMonth(), now.getDate());

     const [totalOrders, pendingInvoice, pendingAwb, syncedToday] = await Promise.all([
       prisma.order.count({ where: { source: "temu" } }),
       prisma.order.count({
         where: { source: "temu", invoice: null, status: { in: ["VALIDATED", "PENDING"] } }
       }),
       prisma.order.count({
         where: { source: "temu", awb: null, invoice: { isNot: null } }
       }),
       prisma.order.count({
         where: { source: "temu", createdAt: { gte: todayStart } }
       }),
     ]);

     return { totalOrders, pendingInvoice, pendingAwb, syncedToday };
   }
   ```

3. Layout:
   - Use existing PageHeader component
   - Use existing StatCard component
   - 4-column grid for stats (responsive: 2 cols on mobile)
   - Quick actions as buttons/links below stats

4. Include recent orders preview:
   - Last 5 Temu orders in a simple table
   - Link to full orders page

Use Romanian labels without diacritics.
Follow Trendyol page structure for consistency.
  </action>
  <verify>
Run dev server and navigate to /temu
Verify page renders with stats and actions.
  </verify>
  <done>
Temu dashboard page exists at /temu.
Stats cards show correct counts.
Quick actions work (sync, view orders, settings).
Recent orders preview shows last 5 orders.
  </done>
</task>

<task type="auto">
  <name>Task 2: Create Temu Orders Page</name>
  <files>src/app/(dashboard)/temu/orders/page.tsx</files>
  <action>
Create dedicated Temu orders page that reuses TemuOrdersList component.

1. Create the page:
   ```typescript
   import { TemuOrdersList } from "@/components/orders/temu-orders-list";
   import { PageHeader } from "@/components/ui/page-header";

   export const metadata = {
     title: "Comenzi Temu | CashFlowSync",
   };

   export default function TemuOrdersPage() {
     return (
       <div className="space-y-6">
         <PageHeader
           title="Comenzi Temu"
           description="Gestioneaza comenzile din magazinele Temu"
         />
         <TemuOrdersList />
       </div>
     );
   }
   ```

2. This page is a full-featured orders management page:
   - Full width orders list
   - All filters available
   - Full pagination
   - Same functionality as Orders page Temu tab but standalone

3. Optionally add breadcrumb:
   - Temu > Comenzi

This provides an alternative entry point for users who prefer the dedicated Temu section.
  </action>
  <verify>
Run dev server and navigate to /temu/orders
Verify TemuOrdersList renders correctly.
  </verify>
  <done>
/temu/orders page exists.
TemuOrdersList component renders on the page.
Full orders functionality available.
  </done>
</task>

<task type="auto">
  <name>Task 3: Add Temu Section to Sidebar</name>
  <files>src/components/sidebar.tsx</files>
  <action>
Add Temu section to sidebar following Trendyol section pattern.

1. Find the Trendyol section in sidebar (search for "Trendyol" or "trendyol").

2. Add Temu section after Trendyol section:
   ```tsx
   // Temu section
   {hasPermission("orders.view") && (
     <div className="space-y-1">
       <h4 className="px-3 text-xs font-semibold text-muted-foreground uppercase tracking-wider">
         Temu
       </h4>
       <SidebarLink href="/temu" icon={Store}>
         Dashboard
       </SidebarLink>
       <SidebarLink href="/temu/orders" icon={ShoppingCart}>
         Comenzi
       </SidebarLink>
     </div>
   )}
   ```

3. Import required icons (if not already):
   - Store icon for dashboard
   - ShoppingCart icon for orders
   - Or use same icons as Trendyol section for consistency

4. Ensure section is collapsible if other sections are collapsible.

5. Place Temu section in logical order:
   - After Trendyol section
   - Before settings/admin sections

Use Romanian labels without diacritics.
Match styling of Trendyol section exactly.
  </action>
  <verify>
Run dev server and check sidebar
Verify Temu section appears with Dashboard and Comenzi links.
Both links navigate correctly.
  </verify>
  <done>
Sidebar has Temu section with header.
Dashboard link goes to /temu.
Comenzi link goes to /temu/orders.
Section only visible to users with orders.view permission.
  </done>
</task>

</tasks>

<verification>
1. TypeScript compiles: `npx tsc --noEmit`
2. Navigation works:
   - Sidebar shows Temu section
   - /temu loads dashboard page
   - /temu/orders loads orders page
3. Stats correct: Dashboard stats match actual order counts
4. Consistency: Temu section styling matches Trendyol section
</verification>

<success_criteria>
- Temu section in sidebar with Dashboard and Comenzi links
- /temu page shows stats and quick actions
- /temu/orders page shows full orders list
- All navigation works correctly
- Permission checks respected (orders.view)
</success_criteria>

<output>
After completion, create `.planning/phases/07.7-temu-complete-integration/07.7-06-SUMMARY.md`
</output>
